<!--pages/student/file-upload/file-upload.wxml-->
<view class="upload-container">
  <!-- å¯¼èˆªæ  -->
  <view class="nav-bar">
    <view class="nav-left" bindtap="onCancel">
      <text class="nav-icon">â†</text>
      <text>å–æ¶ˆ</text>
    </view>
    <view class="nav-title">ä¸Šä¼ æ–‡ä»¶</view>
    <view class="nav-right"></view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content">
    <!-- ä»»åŠ¡ä¿¡æ¯ -->
    <view class="task-info" wx:if="{{task}}">
      <view class="task-title">
        <text class="task-icon">ğŸ“„</text>
        <text>{{task.title}}</text>
      </view>
      <view class="deadline">
        <text class="time-icon">â°</text>
        <text>æˆªæ­¢: {{task.end_time}}</text>
      </view>
    </view>

    <!-- æ–‡ä»¶é€‰æ‹© -->
    <view class="file-select-section">
      <view class="select-title">é€‰æ‹©æ–‡ä»¶</view>
      
      <view class="select-buttons">
        <button class="select-btn" bindtap="onChooseFile">
          <text class="btn-icon">ğŸ“±</text>
          <text>ä»æœ¬æœºé€‰æ‹©</text>
        </button>
      </view>

      <!-- å·²é€‰æ–‡ä»¶ -->
      <view class="selected-files" wx:if="{{selectedFiles.length > 0}}">
        <view class="files-title">å·²é€‰æ–‡ä»¶</view>
        <view class="file-item" wx:for="{{selectedFiles}}" wx:key="index">
          <view class="file-info">
            <text class="file-icon">ğŸ“„</text>
            <view class="file-details">
              <text class="file-name">{{item.name}}</text>
              <text class="file-size">{{item.size}} bytes</text>
            </view>
          </view>
          <text class="remove-btn" bindtap="onRemoveFile" data-index="{{index}}">âŒ</text>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-files" wx:if="{{selectedFiles.length === 0}}">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="bottom-actions">
    <button 
      class="submit-btn {{selectedFiles.length === 0 || uploading ? 'disabled' : ''}}" 
      bindtap="onSubmit"
      disabled="{{selectedFiles.length === 0 || uploading}}"
    >
      <text wx:if="{{!uploading}}">âœ… ç¡®è®¤æäº¤</text>
      <text wx:if="{{uploading}}">ä¸Šä¼ ä¸­...</text>
    </button>
  </view>
</view>
